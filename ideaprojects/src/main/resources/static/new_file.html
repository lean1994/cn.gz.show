<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>用户注册</title>
    <style>
        body {
            background: powderblue;
        }

        #main {
            text-align: center;
            margin-top: 8%;
            line-height: 10px;
        }

        img {
            width: 100px;
            height: 40px;
            left: 10%;
            position: absolute;
            top: 4%;
        }
    </style>
    <script src="http://libs.baidu.com/jquery/2.1.4/jquery.min.js"></script>
    <script src="https://ss0.bdstatic.com/5aV1bjqh_Q23odCf/static/superman/js/lib/jquery-1.10.2_1c4228b8.js"
            type="text/javascript"></script>
</head>
<img src="02.png"/><br>

<div id="main">

    <h3 style="text-align: center;margin-top: -1%;">新用户注册</h3> <br/>
    <form id="register" action="#" onSubmit="return checkForm()">
        <label for="userName" id="username">用&ensp;&ensp;户&ensp;名：</label>
        <input type="text" id="userName" class="userName" onBlur="checkUserName()" oninput="checkUserName()"><br/><br/>
        <span class="default" id="nameErr">请输入至少3位的用户名</span>
        <br/><br/><br/>
        <label for="userPasword" id="userPasword">密 &emsp;&emsp;码：</label>
        <input type="userpassword" id="userPasword" class="userPassword" onBlur="checkUserPassword()"
               oninput="checkUserPassword()"><br/><br>
        <span class="default" id="passwordErr">请输入4到8位的密码</span>
        <br/><br/><br/>
        <label for="ConfirmPasword" id="ConfirmPasword">确认密码：</label>
        <input type="password" id="ConfirmPasword" class="ConfirmPasword" onBlur="checkConfirmPassword()"
               oninput="checkConfirmPassword()"><br/><br/>
        <span class="default" id="repasswordErr">请再输入一遍密码</span>
        <br/><br/><br/>
        <tr>性&emsp;&emsp;别 :
            <input name="gender" type="radio"/>男
            <input name="gender" type="radio"/>女
            <input name="gender" type="radio"/>不明
        </tr>
        <br/><br/><br/>
        <label for="Name" id="Name">真实姓名：</label>
        <input type="text" id="Name" class="Name" onBlur="checkName()" oninput="checkName()"><br/><br/>
        <span class="default" id="nameErr">请输入至少3位的姓名</span>
        <br/><br/><br/>
        <label for="phone" id="phone">手机号码：</label>
        <input type="text" id="phone" class="phone" onBlur="checkPhone()" oninput="checkPhone()"><br/><br/>
        <span class="default" id="phoneErr" class="phone" onBlur="checkPhone()" oninput="checkPhone()">请输入11位手机号码</span>
        <br/><br/><br/>
        <label for="email" id="email">邮箱地址：</label>
        <input type="text" id="email" class="email" onBlur="checkEmail()" oninput="checkEmail()"><br/><br/>
        <span class="default" id="emailErr" class="email" onBlur="checkEmail()" oninput="checkEmail()">请输入正确的邮箱</span>
        <br/><br/><br/>
        <div class="btn">
            <button type="submit" class="divBtn"
                    style="width:120px;height:30px;border-radius:12px;background: #1B6D85;border:none;">注册
            </button>
        </div>
    </form>
</div>

<script type="text/javascript">
    function checkForm() {
        var nametip = checkUserName();
        var passtip = checkPassword();
        var conpasstip = checkConfirmPassword();
        var phonetip = checkPhone();
        var Nameip = checkName();
        var emailip = checkEmail();
        return nametip && passtip && conpasstip && phonetip && Nameip && emailip;
    }

    //验证用户名
    function checkUserName() {
        var username = document.getElementById('userName');
        var errname = document.getElementById('nameErr');
        var pattern = /^\w{3,}$/;  //用户名格式正则表达式：用户名要至少三位
        if (username.value.length == 0) {
            errname.innerHTML = "用户名不能为空"
            errname.className = "error"
            return false;
        }
        if (!pattern.test(username.value)) {
            errname.innerHTML = "用户名不合规范"
            errname.className = "error"
            return false;
        } else {
            errname.innerHTML = "OK"
            errname.className = "success";
            return true;
        }
    }

    //验证密码
    function checkPassword() {
        var userpasswd = document.getElementById('userPasword');
        var errPasswd = document.getElementById('passwordErr');
        var pattern = /^\w{4,8}$/; //密码要在4-8位
        if (!pattern.test(userpasswd.value)) {
            errPasswd.innerHTML = "密码不合规范"
            errPasswd.className = "error"
            return false;
        } else {
            errPasswd.innerHTML = "OK"
            errPasswd.className = "success";
            return true;
        }
    }

    //确认密码
    function checkConfirmPassword() {
        var userpasswd = document.getElementById('userPasword');
        var userConPassword = document.getElementById('ConfirmPasword');
        var errConPasswd = document.getElementById('repasswordErr');
        if ((ConPassword.value) != (userpasswd.value) || ConPassword.value.length == 0) {
            errConPasswd.innerHTML = "上下密码不一致"
            errConPasswd.className = "error"
            return false;
        } else {
            errConPasswd.innerHTML = "OK"
            errConPasswd.className = "success";
            return true;
        }
    }

    //验证手机号
    function checkPhone() {
        var userphone = document.getElementById('phone');
        var phonrErr = document.getElementById('phoneErr');
        var pattern = /^1[34578]\d{9}$/; //验证手机号正则表达式
        if (!pattern.test(phone.value)) {
            phonrErr.innerHTML = "手机号码不合规范"
            phonrErr.className = "error"
            return false;
        } else {
            phonrErr.innerHTML = "OK"
            phonrErr.className = "success";
            return true;
        }
    }

    //验证邮箱
    function checkEmail() {
        var Name = document.getElementById('email');
        var NameErr = document.getElementById('emailErr');
        var pattern = /^[\d\w-.]+@\w{2,4}(\.\w{2,4}){1,2}$/; //验证邮箱正则表达式
        if (!pattern.test(email.value)) {
            phonrErr.innerHTML = "邮箱格式错误"
            phonrErr.className = "error"
            return false;
        } else {
            phonrErr.innerHTML = "OK"
            phonrErr.className = "success";
            return true;
        }
    }
</script>
<script>
    function register() {
        var gender = $('input:radio[name="gender"]:checked').val();
        $.post(
            "users/insertUser",
            {
                "name": $("#username").val(),
                "password": $("#password").val(),
                "gender": gender,
                "perName": $("#realname").val(),
                "telephone": $("#telephone").val(),
                "email": $("#email").val()
            },

            function (data) {
                alert("注册成功，即将跳转登录界面")
            }
        )
    }

</script>
</body>
</html>
